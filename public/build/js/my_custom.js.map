{"version":3,"sources":["my_custom.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"my_custom.js","sourcesContent":["$(function(){\n  $.ajaxSetup({\n      headers: { 'X-CSRF-Token' : $('meta[name=_token]').attr('content') }\n  });\n})\n$(document).ready(function () {\n  var App = {\n    manageDynamicLoader: function(mode){\n      if( mode == 'show'){\n        $('.loaderbg').removeClass('hide');\n      }\n      else{\n        $('.loaderbg').addClass('hide');\n      }\n    },\n    registerGlobalDomFunctions: function(){\n      /** insert datepicker **/\n      $('.page-content .date').each(function(){\n        $(this).datepicker();\n      })\n      /** hide tools menu **/\n      $('.tools').each(function(){\n        $(this).hide();\n      });\n      /** go back links **/\n      var controller = null, mode = null; //initialize controller and mode variable to null\n      //on click function for go back button\n      $('.icon-custom-left, .go-back').on('click', function(e){\n        App.manageDynamicLoader('show');\n        if($(this).hasClass('icon-custom-left')){\n          $(this).siblings('h3').eq(0).find('span').eq(0).click();\n          return false;\n        }\n        array_length = links.length; //calculates length of go back links\n        length = array_length-2;\n        if($(this).data('from') == \"search\"){\n          if(current_link == \"default\"){\n            location.reload();\n            return false;\n          }else{\n            // App.setSidebarActive(current_link[0], 'remove');\n            getUrl = current_link[0]+'/'+current_link[1];\n            current_link[0] = current_link[0];\n            current_link[1] = current_link[1];\n            if(current_link[2] != 'undefined'){\n              getUrl = getUrl+'/'+current_link[2];\n              current_link[2] = current_link[2];\n            }\n            $.get(getUrl,function(res){\n              $('.page-content').html(res);\n              /* Set the defaults for DataTables initialisation*/\n              $('.page-content .datatable').dataTable();\n              App.manageDynamicLoader('hide');\n              App.registerGlobalDomFunctions();\n              return false;\n            })\n          }\n          return false;\n        }\n        //if back links length is 2 and data controller not exists\n        if (links.length === 2){\n          location.reload();// dashboard\n        } else {\n          if ((typeof links[length]) == \"undefined\"){\n            location.reload();\n            return false;\n          }\n          // App.setSidebarActive(links[length][0], 'remove');\n          controller = links[length][0]; // get controller name from links array\n          mode = links[length][1]; //get mode from links array\n          //get parent li of ul.sub-menu having child with same data controller\n          links.pop(); //removes array last element\n          getUrl = controller+'/'+mode;\n          current_link[0] = controller;\n          current_link[1] = mode;\n          App.setDefaultActionActive(controller, mode, 'normal');\n          if((typeof links[length][2]) != \"undefined\"){\n            getUrl = controller+'/'+mode+'/'+links[length][2];\n            current_link[2] = links[length][2];\n          }else{\n            /*task_link = $('.task_link[data-controller=\"'+controller+'\"][data-mode=\"'+mode+'\"]');\n            parent_li = task_link.parent().parent().parent('li');\n            if(!parent_li.hasClass('open')){\n              parent_li.find('a.main_module_link').eq(0).click();\n            }\n            $('.menu_bg').each(function(){\n              $(this).removeClass('menu_bg');\n            });\n            task_link.addClass('menu_bg');*/\n            // App.setDefaultActionActive(controller, mode);\n          }\n          $.get(getUrl,function(res){\n            $('.page-content').html(res);\n            /* Set the defaults for DataTables initialisation*/\n            $('.page-content .datatable').dataTable();\n            App.manageDynamicLoader('hide');\n            App.registerGlobalDomFunctions();\n          })\n        }\n      });\n\n      $('#assign_contact_modal_close, #assign_contact_modal_cancel, .assign_contact_modal_back').on('click', function(e){\n        e.preventDefault();\n        $('#assign_offer_partners').modal('hide');\n        $('#list_offer_partners').modal('show');\n      });\n      $('#assign_partner_contacts_id').off().on('click', function(e){\n        e.preventDefault();\n        project_id = $('#offer_project_select').val();\n        if(project_id == ''){\n          project_id = 0;\n        }\n        $.ajax({\n          url: 'partner/list-by-offer/'+project_id,\n          type: \"GET\",\n          success: function(data){\n            if(typeof(data.exc) !== 'undefined'){\n              alert('Whoops! Your request can not be performed at this time. Please try again later.');\n            }\n            else{\n              $('#list_offer_partners_dialog').html(data);\n            }\n            App.manageDynamicLoader('hide');\n            App.registerGlobalDomFunctions();\n            return false;\n          }\n        });\n      })\n      /*=======================Form Handler for handling all form submit================*/\n      $('form').off().on('submit', function(e){\n        e.preventDefault();\n        App.manageDynamicLoader('show');\n        form_id  = '#'+$(this).attr('id'),\n        ctrl     = $(this).data('controller'),\n        type     = $(this).data('type'),\n        ckeditor = $(this).data('ckeditor'),\n        method   = $(this).data('method'),\n        is_modal = $(this).data('modal');\n        if(ctrl == 'offer' && method == 'update'){\n          if (!confirm('Are you sure you want to update this offer?')){\n            App.manageDynamicLoader('hide');\n            return false;\n          }\n        }\n        if(ckeditor == 'yes'){\n          for ( instance in CKEDITOR.instances ) {\n            CKEDITOR.instances[instance].updateElement();\n          }\n        }\n        if(type == 'multipart'){\n          Controller.multipartFormHandler(ctrl, form_id, method);\n        }\n        else if(is_modal == \"yes\"){\n          Controller.modalFormHandler(ctrl, form_id, method);\n        }\n        else{\n          Controller.commonFormHandler(ctrl, form_id, method);\n        }\n        return false;\n      });\n      /*=======================Form Handler ends================*/\n      /*=======================Edit-Contact/Client/Partner/Channel/OfferTypes/Project/Placement/Offer================*/\n      $(\".datatable\").off().on(\"click\", \".assigncontact, .editcontact, .assign_project, .editclient, .editpartner, .editchannel, .edit_general_offer_type, .edit_detailed_offer_type, .edit_offer_type_category, .editproject, .edit_placement, .edit_offer, .edit_offer_placement, .edit_email_template, .edit_email, .edit_communication_package, .edit_user, .edit_country, .edit_language, .edit_category\", function(e){\n        e.preventDefault();\n        App.manageDynamicLoader('show');\n        ctrl  = $(this).data('controller'),\n        id    = $(this).data('id'),\n        partial_view  = $(this).data('partial'),\n        method    = $(this).data('method');\n        if(partial_view != undefined){\n          Controller.anchorHandlerPartialType(ctrl, id, method, partial_view);\n          return false;\n        }\n        Controller.commonAnchorHandler(ctrl, id, method);\n      });\n      /*=======================Edit-Contact/Client/Partner/Channel/OfferTypes/Project/Placement/Offer================*/\n      /*=======================Delete-Contact/Client/Partner/Channel/OfferTypes/Project/Placement/Offer================*/\n      $(\".datatable\").on(\"click\", \".deletecontact, .deleteclient, .deletepartner, .deleteproject, .deletechannel, .delete_general_offer_type, .delete_detailed_offer_type, .delete_offer_type_category, .delete_placement, .delete_offer, .delete_email_template, .delete_email, .delete_communication_package, .delete_user, .delete_country, .delete_language, .delete_category\", function(e){\n        e.preventDefault();\n        App.manageDynamicLoader('show');\n        ctrl  = $(this).data('controller'),\n        id    = $(this).data('id'),\n        method    = $(this).data('method');\n        if(method == 'delete'){\n          if (!confirm('Are you sure you want to delete?')){\n            App.manageDynamicLoader('hide');\n            return false;\n          }\n        }\n        Controller.commonDeleteHandler(ctrl, id, method);\n      });\n      /*=======================Delete-Contact/Client/Partner/Channel/OfferTypes/Project/Placement/Offer================*/\n      $(\".body_action_link\").on(\"click\", function(e){\n        e.preventDefault();\n        App.manageDynamicLoader('show');\n        ctrl  = $(this).data('controller'),\n        id    = $(this).data('id'),\n        partial_view  = $(this).data('partial'),\n        method    = $(this).data('method');\n        if(partial_view != undefined){\n          Controller.anchorHandlerPartialType(ctrl, id, method, partial_view);\n          return false;\n        }\n        Controller.commonAnchorHandler(ctrl, id, method);\n      });\n      $(\".datatable\").on(\"click\", \".assign_contact_modal\", function(e){\n        e.preventDefault();\n        App.manageDynamicLoader('show');\n        ctrl      = $(this).data('controller'),\n        id        = $(this).data('id'),\n        method    = $(this).data('method')\n        selector      = $(this).data('selector');\n        Controller.modalAnchorHandler(ctrl, id, method, selector)\n      });\n      /*=======================Contact Section================*/\n      $('#contact-language').off().on('change', function(e){\n        e.preventDefault();\n        language_id = $(this).val();\n        all_titles = $('#title_mr, #title_mrs, #title_ms, #title_herr, #title_frau');\n        german_titles = $('#title_herr, #title_frau');\n        english_titles = $('#title_mr, #title_mrs, #title_ms');\n        if(language_id != ''){\n          if(language_id == 2){\n            english_titles.hide();\n            german_titles.show();\n            $('#contact-title').val('Select Below');\n            return false;\n          }else{\n            german_titles.hide();\n            english_titles.show();\n            $('#contact-title').val('Select Below');\n            return false;\n          }\n        }else{\n          all_titles.hide();\n          $('#contact-title').val('Select Below');\n          return false;\n        }\n      });\n      $(\".datatable\").on(\"click\", \".contact_id\", function(e){\n        $this = $(this);\n        var input_element_id = $this.attr('id');\n        var assign_form = $this.closest('form#contact_assign_form').eq(0);\n        if(!assign_form.length){\n          var assign_form = $this.closest('form#contact_assign_form_modal').eq(0);\n        }\n        if($this.is(':checked')){\n          var input = '<input type=\"hidden\" name=\"assign_contact_id[]\" class=\"'+input_element_id+'\" value=\"'+$this.val()+'\">';\n          assign_form.prepend(input);\n        }\n        else{\n          var hidden_input = $(\"input[type='hidden'].\"+input_element_id);\n          hidden_input.remove();\n        }\n      });\n\n      /*=======================Contact Section ends================*/\n      /*=======================Address Section================*/\n      $('#address_form_btn').off().on(\"click\", function(e){\n        e.preventDefault();\n        $('#address_form_wrapper').slideToggle();\n      })\n      /*=======================Address Section ends================*/\n      /*=======================Project Section ================*/\n      //project logo upload\n      $(\"#logo\").off().on(\"change\", function(){\n        var fileName = this.value.split(/[\\/\\\\]/).pop();;\n        var resp = Fileupload.fileCheck($('#logo'));\n        if(resp == false){\n          var files = !!this.files ? this.files : [];\n          if (!files.length || !window.FileReader) return; // no file selected, or no FileReader support\n          if (/^image/.test( files[0].type)){ // only image file\n            var reader = new FileReader(); // instance of the FileReader\n            reader.readAsDataURL(files[0]); // read the local file\n            reader.onloadend = function(){\n              // set image data as background of div\n              $(\"#img_preview\").css(\"background-image\", \"url(\"+this.result+\")\");\n              $(\"#img_preview\").css(\"background-size\", \"165px 165px\");\n              $(\"#img_preview\").css(\"background-repeat\", \"no-repeat\");\n              $('#logo_text').val(fileName);\n              $('#project_delete_logo').show();\n              $('#project_logo_img').remove();\n            }\n          }else{\n            $(\"#img_preview\").css(\"background-image\", \"url('assets/images/image-preview.png')\");\n          $('#logo_text').val('');\n          $('#old_project_logo_img').show();\n          $('#project_delete_logo').hide();\n          }\n        }\n        else {\n          return false;\n        }\n        App.registerGlobalDomFunctions();\n      });\n      $('#client').off().on('change', function(e){\n        e.preventDefault();\n        client_id = $(this).val();\n        if(client_id != ''){\n          $.ajax({\n            url: 'client/client-contact/'+client_id,\n            type: \"GET\",\n            success: function(data){\n              if(typeof(data.exc) !== 'undefined'){\n                alert('Whoops! Your request can not be performed at this time. Please try again later.');\n              }\n              else if(data == ''){\n                $('#client_contact').html('<option disabled>N/A</option>');\n              }\n              else{\n                $('#client_contact').html(data);\n              }\n              App.manageDynamicLoader('hide');\n              App.registerGlobalDomFunctions();\n              return false;\n            }\n          });\n        }else{\n          $('#client_contact').html('<option disabled>N/A</option>');\n          return false;\n        }\n      });\n      $('#project_delete_logo').off().on('click', function(e){\n        e.preventDefault();\n        App.manageDynamicLoader('show');\n        if (!confirm('Are you sure you want to delete this project logo?')){\n          App.manageDynamicLoader('hide');\n          return false;\n        }\n        $(\"#img_preview\").css(\"background-image\", \"url('assets/images/image-preview.png')\");\n        $('#logo_text').val('');\n        $(this).hide();\n        $('#old_project_logo_img').show();\n        App.registerGlobalDomFunctions();\n        App.manageDynamicLoader('hide');\n        return false;\n      });\n      $('#show_projectlogo_delete').off().on('click', function(e){\n        $this = $(this);\n        App.manageDynamicLoader('show');\n        var mode = $this.data('mode');\n        var project_id = $this.data('id');\n        if (!confirm('Are you sure you want to delete this project logo?')){\n          App.manageDynamicLoader('hide');\n          return false;\n        }\n        $.ajax({\n          url: 'project/'+mode+'/'+project_id,\n          type: \"GET\",\n          success: function(data){\n            if(typeof(data.exc) !== 'undefined'){\n              alert('Whoops! Requested project logo could not delete this time. Please try again later.');\n            }\n            else{\n              App.commonViewLoad(data);\n            }\n            App.manageDynamicLoader('hide');\n            App.registerGlobalDomFunctions();\n            return false;\n          }\n        });\n      });\n      /*=======================Project Section ends================*/\n      /*=======================Placement Section================*/\n      $('#placement_project_select').off().on('change', function(e){\n        e.preventDefault();\n        project_id = $(this).val();\n        if(project_id != ''){\n          $.ajax({\n            url: 'placement/channel-by-project/'+project_id,\n            type: \"GET\",\n            success: function(data){\n              if(typeof(data.exc) !== 'undefined'){\n                alert('Whoops! Your request can not be performed at this time. Please try again later.');\n              }\n              else{\n                $('#placement_channel_select').html(data);\n              }\n              App.manageDynamicLoader('hide');\n              App.registerGlobalDomFunctions();\n              return false;\n            }\n          });\n        }else{\n          $('#placement_channel_select').html('<option value=\"\">Select Below</option>');\n          return false;\n        }\n      });\n      /*=======================Placement Section Ends================*/\n      /*=======================Offer Section================*/\n      $('.offer_status_label').off().on('click', function(e){\n        net = $(this).parent().next().children('input:checkbox').prop('checked', false);\n      });\n      $('.offer_status_na_label').off().on('click', function(e){\n        net = $(this).parent().prev().children('input:checkbox').prop('checked', false);\n      });\n      $('#offer_project_select').off().on('change', function(e){\n        e.preventDefault();\n        project_id = $(this).val();\n        if(project_id != ''){\n          $.ajax({\n            url: 'offer/form-data-by-project/'+project_id,\n            type: \"GET\",\n            success: function(data){\n              if(typeof(data.exc) !== 'undefined'){\n                alert('Whoops! Your request can not be performed at this time. Please try again later.');\n              }\n              else{\n                $('#select_project_view_wrapper').html(data);\n              }\n              App.registerGlobalDomFunctions();\n              return false;\n            }\n          });\n          $.ajax({\n            url: 'offer/project-ji-users/'+project_id,\n            type: \"GET\",\n            success: function(data){\n              if(typeof(data.exc) !== 'undefined'){\n                alert('Whoops! Your request can not be performed at this time. Please try again later.');\n              }\n              else{\n                select_na = '<option value=\"\">Select Below</option>';\n                select_na_disabled = '<option value=\"\" disabled=\"disabled\">N/A</option>';\n                $('#offer_ji_contact_select').html(select_na);\n                $('#offer_secondary_jiuser_select').html('');\n                var obj = jQuery.parseJSON(data);\n                $.each(obj, function(key, value){\n                  $('#offer_ji_contact_select').append('<option value=\"'+value.id+'\">'+value.first_name+' '+value.last_name+\"</option>\");\n                  $('#offer_secondary_jiuser_select').append('<option value=\"'+value.id+'\">'+value.first_name+' '+value.last_name+\"</option>\");\n                });\n\n              }\n              App.registerGlobalDomFunctions();\n              return false;\n            }\n          });\n        }else{\n          select_na = '<option value=\"\">Select Below</option>';\n          select_na_disabled = '<option value=\"\" disabled=\"disabled\">N/A</option>';\n          na_option = '<p class=\"label\">No matching records found.</p>'\n          $('#offer_placement_select_wrapper, #offer_partner_select_wrapper, #offer_offer_tc_select_wrapper, #offer_general_ot_select_wrapper, #offer_detailed_ot_select_wrapper, #offer_partner_contact_select_wrapper').html(na_option);\n          $('#offer_ji_contact_select').html(select_na);\n          $('#offer_secondary_jiuser_select').html(select_na_disabled);\n        }\n      });\n      $('#offer_partner_select').off().on('change', function(e){\n        e.preventDefault();\n        partner_id = $(this).val();\n        if(partner_id != ''){\n          $.ajax({\n            url: 'offer/partner-contacts-by-partner/'+partner_id,\n            type: \"GET\",\n            success: function(data){\n              if(typeof(data.exc) !== 'undefined'){\n                alert('Whoops! Your request can not be performed at this time. Please try again later.');\n              }\n              else{\n                $('#select_primary_contact_partial_wrapper').html(data);\n              }\n              App.registerGlobalDomFunctions();\n              return false;\n            }\n          });\n        }else{\n          no_data = '<p class=\"label\">No matching records found.</p>'\n          $('#offer_partner_contact_select_wrapper').html(no_data);\n        }\n      });\n      /************* offer_edit_placement, placement select on change ***************/\n      $('#select_offer_placement_id').off().on('change', function(e){\n        e.preventDefault();\n        placement_id = $(this).val();\n        offer_id = $('#offer_id').val();\n        post_data = { placement_id: placement_id, offer_id: offer_id };\n        if(placement_id != ''){\n          $.ajax({\n            url: 'offer/placement-by-offer',\n            data: post_data,\n            type: \"POST\",\n            success: function(data){\n              if(typeof(data.exc) !== 'undefined'){\n                alert('Whoops! Your request can not be performed at this time. Please try again later.');\n              }\n              else{\n                $('#placement_start_date').val(data[0].placement_start_date);\n                $('#placement_end_date').val(data[0].placement_end_date);\n                $('#offer_placement_id').val(data[0].id);\n                $('#placement_start_date, #placement_end_date').prop('disabled', false);\n              }\n              App.manageDynamicLoader('hide');\n              App.registerGlobalDomFunctions();\n              return false;\n            }\n          });\n        }else{\n          $('#placement_start_date, #placement_end_date').val('').attr('disabled', 'disabled');\n          return false;\n        }\n      });\n      /************* offer_ji_contact_select on change ***************/\n      $('#offer_ji_contact_select').off().on('change', function(e){\n        project_id = $('#offer_project_select').val();\n        e.preventDefault();\n        ji_contact_id = $('#offer_ji_contact_select').val();\n        if(ji_contact_id == ''){\n          ji_contact_id = 0;\n        }\n        $.ajax({\n          url: 'offer/secondary-users-data/'+ji_contact_id+'/'+project_id,\n          type: \"GET\",\n          success: function(data){\n            if(typeof(data.exc) !== 'undefined'){\n              alert('Whoops! Your request can not be performed at this time. Please try again later.');\n            }\n            else{\n              $('#secondary_users_wrapper').html(data);\n            }\n            App.registerGlobalDomFunctions();\n            return false;\n          }\n        });\n      });\n      /************* offer_ji_contact_select on change ends ***************/\n      /*=======================Offer Section Ends================*/\n      /*=======================Email-Template Section Starts================*/\n      $('#email_template_attach').off().on('click', function(e){\n        $this = $(this);\n        var input_file = $this.siblings('input[type=\"file\"].empty_file');\n        input_file.click();\n      });\n      $('.template_add_attachment').off().on('change', function(e){\n        $this = $(this);\n        var input_original_value = $this.val().split('/').pop().split('\\\\').pop();\n        var input_value = input_original_value.split('/').pop().split('\\\\').pop();\n        var content = '<span class=\"attachment-item\">'+input_value+'&nbsp;<a class=\"delete_template_attachment\" style=\"cursor:pointer\" data-toggle=\"tooltip\" data-placement=\"top\" data-original-title=\"Delete\"><i class=\"fa fa-trash-o\"></i></a>&nbsp;&nbsp;&nbsp;</span>';\n        var input_file = '<input type=\"file\" name=\"attachments[]\" id=\"\" style=\"display:none;\" class=\"template_add_attachment empty_file\">';\n        $this\n          .removeClass('empty_file')\n          .siblings('.attachment-content-wrapper')\n            .append(content)\n          .end()\n          .parent('.attachment_main_wrapper')\n            .append(input_file);\n        App.registerGlobalDomFunctions();\n      });\n      $('.delete_template_attachment').off().on('click', function(e){\n        if (!confirm('Are you sure you want to delete this attachment?')){\n          return false;\n        }\n        var parent_item = $(this).parent();\n        var index = parent_item.index();\n        var total_data = $('span.attachment-item').length;\n        var new_data = $('.template_add_attachment').length-1;\n        var old_data = total_data-new_data;\n        var delete_index = index-old_data;\n        var content_id = $(this).data('id');\n        if(content_id != undefined){\n          var attachment = $(this).data('attachment');\n          var data = {id: content_id, file: attachment};\n          $.ajax({\n            url: 'email-template/delete-attachment',\n            data: data,\n            type: \"POST\",\n            // headers: {'X-Requested-With': 'XMLHttpRequest'},\n            success: function(data){\n              if(data == false){\n                alert('Could not find/delete this file now. Please try again.');\n              }else{\n                parent_item.remove();\n              }\n            }\n          });\n        }else{\n          if(total_data == new_data){\n            $('.template_add_attachment').eq(index).remove();\n            parent_item.remove();\n          }else{\n            parent_item.remove();\n            $('.template_add_attachment').eq(delete_index).remove();\n          }\n        }\n        App.registerGlobalDomFunctions();\n      });\n      $('#email_template_type').off().on('change', function(e){\n        var type_value = $(this).val();\n        var activation_variables = ['{activation_link}'];\n        var microsite1_variables = ['{microsite1_link_en}', '{microsite1_link_de}'];;\n        var microsite2_final_variables = ['{microsite2_link_en}', '{microsite2_link_de}'];\n        var microsite2_reminder_variables = ['{microsite2_link_en}', '{microsite2_link_de}'];\n        if(type_value != ''){\n          switch (type_value){\n            case 'activation':\n              $('span.variables_wrapper').html('');\n              $('#sender_email').removeAttr('disabled');\n              $.each(activation_variables, function(index, value){\n                value = ' '+value;\n                $('span.variables_wrapper').append(value);\n              });\n              break;\n            case 'offer_extension':\n              $('span.variables_wrapper').html('No matching variables found.');\n              $('#sender_email').val('').attr(\"disabled\", \"disabled\");\n              break;\n            case 'microsite1':\n              $('span.variables_wrapper').html('');\n              $('#sender_email').removeAttr('disabled');\n              $.each(microsite1_variables, function(index, value){\n                value = ' '+value;\n                $('span.variables_wrapper').append(value);\n              });\n              break;\n            case 'microsite2_final':\n              $('span.variables_wrapper').html('');\n              $('#sender_email').removeAttr('disabled');\n              $.each(microsite2_final_variables, function(index, value){\n                value = ' '+value;\n                $('span.variables_wrapper').append(value);\n              });\n              break;\n            case 'microsite2_reminder':\n              $('span.variables_wrapper').html('');\n              $('#sender_email').removeAttr('disabled');\n              $.each(microsite2_reminder_variables, function(index, value){\n                value = ' '+value;\n                $('span.variables_wrapper').append(value);\n              });\n              break;\n            default:\n              $('#sender_email').removeAttr('disabled');\n              $('span.variables_wrapper').html('No matching variables found.');\n              break;\n          }\n        }else{\n          $('span.variables_wrapper').html('No matching variables found.');\n        }\n      });\n      $('.add_cc_address').off().on('click', function(e){\n        e.preventDefault();\n        var item = '';\n        item += '<div class=\"col-md-4 cc_item\">';\n        item += '<label for=\"cc_emails\"><a class=\"btn btn-warning btn-mini remove_cc_address\"><i class=\"fa fa-times\"></i>&nbsp;Remove</a></label>';\n        item += '<div class=\"cc_emails_wrapper\" id=\"cc_emails_wrapper\">';\n        item += '<input name=\"cc_emails[]\" id=\"\" type=\"text\"  class=\"form-control\" placeholder=\"CC Email\" value=\"\">';\n        item += '</div>';\n        item += '</div>';\n        $('span.cc_emails_wrapper').append(item);\n        App.registerGlobalDomFunctions();\n      });\n      $('a.remove_cc_address').off().on('click', function(e){\n        $(this).parent().parent('.cc_item').fadeOut('fast', function(){\n          $(this).remove();\n        });\n        App.registerGlobalDomFunctions();\n      });\n      $('.show_delete_attachment').off().on('click', function(e){\n        App.manageDynamicLoader('show');\n        if (!confirm('Are you sure you want to delete this attachment?')){\n          App.manageDynamicLoader('hide');\n          return false;\n        }\n        $this = $(this);\n        var attachment = $this.data('attachment');\n        var content_id = $this.data('id');\n        var type = $this.data('type');\n        var post_data = { content_id: content_id, file: attachment, module_type: type };\n        $.ajax({\n          url: 'email-template/show-delete-attachment',\n          data: post_data,\n          type: \"POST\",\n          success: function(data){\n            if(typeof(data.exc) !== 'undefined'){\n              alert('Whoops! Your request can not be performed at this time. Please try again later.');\n              App.manageDynamicLoader('hide');\n            }\n            else{\n              App.commonViewLoad(data);\n            }\n          }\n        });\n      });\n      $('.show_download_attachment').off().on('click', function(e){\n        $(location).attr('href',$(this).data('href'));\n      });\n      /*=======================Email-Template Section Ends==================*/\n      /*=======================Email Section Starts==================*/\n      $(\".datatable\").on(\"click\", \".confirm_send\", function(e){\n        e.preventDefault();\n        App.manageDynamicLoader('show');\n        if (!confirm('Are you sure you want to change the status of this email?')){\n          App.manageDynamicLoader('hide');\n          return false;\n        }\n        if($(this).prop('checked') == true){\n          Controller.commonAnchorHandler('email', $(this).data('eid'), 'enable-confirm');\n        } else {\n          Controller.commonAnchorHandler('email', $(this).data('eid'), 'disable-confirm');\n        }\n      });\n      //offer reporting datepicker\n      $(\".month_year_date\").each(function(e){\n        $(this).datepicker({\n          format: \"mm-yyyy\",\n          startView: \"months\",\n          minViewMode: \"months\"\n        });\n      });\n      //email list queue calender on change event\n      $(\"#email_queue_calender\").datepicker( {\n          format: \"mm-yyyy\",\n          startView: \"months\",\n          minViewMode: \"months\"\n      }).on('changeDate', function(e){\n        $this = $(this);\n        $this.unbind('changeDate');\n        App.manageDynamicLoader('show');\n        var value = $(this).val();\n        $.ajax({\n          url: 'email/monthly-queue-emails/'+value,\n          // data: post_data,\n          type: \"GET\",\n          // type: \"POST\",\n          success: function(data){\n            if(typeof(data.exc) !== 'undefined'){\n              alert('Whoops! Your request can not be performed at this time. Please try again later.');\n            }\n            else{\n              var table = $('#emails_queue_table');\n              table.dataTable().fnDestroy();\n              $('#list_queue_table_body').html(data);\n              table.dataTable().fnDraw();\n            }\n            App.manageDynamicLoader('hide');\n            App.registerGlobalDomFunctions();\n            return false;\n          }\n        });\n        $this.bind('changeDate');\n      });\n      /*=======================Email Section Ends==================*/\n      /*=======================Report Section Starts==================*/\n      $('#all_contact_export_project').on(\"change\", function(e){\n        var projects_selected = $(e.target).val();\n        if(projects_selected != null){\n          $.ajax({\n            url: \"report/projects-placements\",\n            type: \"post\",\n            data: {project_ids: projects_selected},\n            success: function(data){\n              $('#all_contacts_placement').html(data);\n              return false;\n            }\n          });\n        }\n        else {\n          na_option = '<option value=\"\" disabled=\"disabled\">N/A</option>';\n          $('#all_contacts_placement').html(na_option);\n        }\n      });\n      /*=======================Report Section Ends==================*/\n      // $(\".datatable\").on(\"click\", \".table-link, .table-link-search\", function(e){\n      $(\".datatable\").on(\"click\", \".body-link, .table-link, .table-link-search\", function(e){\n        App.manageDynamicLoader('show');\n        $this = $(this);\n        var controller = $this.data('controller'),\n          mode = $this.data('mode'),\n          param_id = $this.data('param'),\n          class_name = $this.attr(\"class\");\n        if(class_name == \"table-link-search\"){\n        // if(class_name == \"table-link-search\" || class_name == \"body-link\"){\n          // App.setSidebarActive(controller, 'remove');\n          App.setDefaultActionActive(controller, mode, 'normal');\n        }\n        if(param_id != '' && param_id != undefined){\n          postUrl = controller+'/'+mode+'/'+param_id;\n        }else{\n          postUrl = controller+'/'+mode;\n        }\n        if(controller == 'offer' && mode == 'disable'){\n          if (!confirm('Are you sure you want to disbale this offer?')){\n            App.manageDynamicLoader('hide');\n            return false;\n          }\n        }\n        if(class_name == \"body-link\" && mode == \"show\"){\n          /** go back links **/\n          current_link[0] = controller;\n          current_link[1] = mode;\n          current_link[2] = param_id;\n          array_length = links.length-1;\n          if(links[array_length][0] !== controller || links[array_length][1] !== mode){\n            sublinks = []; //empty array\n            sublinks[0] = controller; // set controller name\n            sublinks[1] = mode; //set mode\n            sublinks[2] = param_id; //set parameterid\n            links.push(sublinks); // push sublinks array to links(go back links) array\n            array_length = null; //set length to null\n          }\n          /** go back links end here **/\n        }\n        $.ajax({\n          url: postUrl,\n          type: \"get\",\n          success: function(data){\n            var search_key = $this.data('search')\n            if(search_key != undefined){\n              var resp = {\n                view_page: data,\n                search: search_key\n              };\n              App.commonViewLoad(resp);\n            }\n            else{\n              App.commonViewLoad(data);\n            }\n          }\n        });\n\n        e.preventDefault();\n      });\n      $('.body-link').off().on('click',function(e){\n        App.manageDynamicLoader('show');\n        $this = $(this);\n        var controller = $this.data('controller'),\n            mode = $this.data('mode')\n            param_id = $this.data('param');\n        // App.setSidebarActive(controller, 'remove');\n        App.setDefaultActionActive(controller, mode, 'normal');\n        if(param_id != '' && param_id != undefined){\n          postUrl = controller+'/'+mode+'/'+param_id;\n        }else{\n          postUrl = controller+'/'+mode;\n        }\n        if($(this).hasClass('add-back-link')){\n          // links.pop();\n          task_link = $('.task_link[data-controller=\"'+controller+'\"][data-mode=\"'+mode+'\"]');\n          $('.menu_bg').each(function(){\n            $(this).removeClass('menu_bg');\n          });\n          task_link.addClass('menu_bg');\n        }\n        if(mode == \"show\"){\n          /** go back links **/\n          current_link[0] = controller;\n          current_link[1] = mode;\n          current_link[2] = param_id;\n          array_length = links.length-1;\n          if(links[array_length][0] !== controller || links[array_length][1] !== mode){\n            sublinks = []; //empty array\n            sublinks[0] = controller; // set controller name\n            sublinks[1] = mode; //set mode\n            sublinks[2] = param_id; //set parameterid\n            links.push(sublinks); // push sublinks array to links(go back links) array\n            array_length = null; //set length to null\n          }\n          /** go back links end here **/\n        }\n\n        $.ajax({\n          url: postUrl,\n          type: \"get\",\n          success: function(data){\n            App.commonViewLoad(data);\n          }\n        });\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n      });\n      $('span.user_add_back').on('click', function(e){\n        App.manageDynamicLoader('show');\n        controller = $(this).data(\"controller\");\n        mode = $(this).data(\"mode\");\n        Controller.commonLoadHandler(controller, mode);\n        App.setDefaultActionActive(controller, mode, 'normal');\n        return false;\n      });\n      /*=======================Call Center Briefing Section Starts==================*/\n      $('#call_center_project').on('change', function(e){\n        project_id = $(this).val();\n        if(project_id != ''){\n          $.ajax({\n            url: 'placement/placements-call-center/'+project_id,\n            type: \"GET\",\n            success: function(data){\n              if(typeof(data.exc) !== 'undefined'){\n                alert('Whoops! Your request can not be performed at this time. Please try again later.');\n              }\n              else{\n                $(\"#call_center_placement\").html(data);\n              }\n              return false;\n            }\n          });\n        }else{\n          na_option = '<option value=\"\" disabled=\"disabled\">N/A</option>';\n          $('select#call_center_placement').html(na_option);\n        }\n      });\n      /*=======================Call Center Briefing Section Endss==================*/\n      /*=====================Search Functionality===========================*/\n      $('input#entire_search').on('change', function(e){\n        e.preventDefault();\n        App.manageDynamicLoader('show');\n        Controller.commonFormHandler('dashboard', '#entire_search', 'search');\n        $('.menu_bg').each(function(e){\n          $(this).removeClass('menu_bg');\n        });\n        if($('.dashboard_menu').hasClass('active')){\n          $('.dashboard_menu').removeClass('active')\n                              .removeClass('dashboard_active')\n                              .find('span.arrow')\n                                .removeClass('open');\n        }\n        return false;\n      });\n      /*======================Search Functionality ends=======================*/\n    },\n    commonViewLoad: function(data){\n      if(typeof(data.exc) !== 'undefined'){\n        if(typeof(data.custom_message) !== 'undefined'){\n          alert(data.custom_message);\n        }else{\n          alert('Could not perform your action now. Please try again.');\n        }\n      }\n      else if(typeof(data.redirect) !== 'undefined'){\n        window.open(data.redirect);\n      }\n      else if(typeof(data.view) !== 'undefined'){\n        $(location).attr('href',$('#call-center-download').attr('href'));\n        $(location).attr('href',$('#all_contacts_download').attr('href'));\n        $(location).attr('href',$('#offer-month-download').attr('href'));\n        $('.page-content').html(data.view);\n      }\n      else if(typeof(data.view_page) !== 'undefined'){\n        $('.page-content').html(data.view_page);\n        // Set the defaults for DataTables initialisation\n        $('.page-content .datatable').dataTable({\n          \"bDestroy\": true,\n          \"oSearch\": {\"sSearch\": data.search}\n        });\n      }\n      else if(typeof(data.modal) !== 'undefined'){\n        if(data.selector == \"#placement_add_form_modal\"){\n          LiveFetch.fetchPlacement();\n        }\n        else if(data.selector == \"#partner_add_form_modal\"){\n          LiveFetch.fetchOfferPartner();\n        }\n        else if(data.selector == \"#contact_assign_form_modal\"){\n          LiveFetch.fetchPrimaryContact();\n        }\n        if(data.selector == \"#contact_assign_form_modal\"){\n          data.selector = \"#partners_list_modal_row\";\n          var modal_dialog = $(data.selector).parents(\".modal-dialog\").eq(0);\n          modal_dialog.html(data.data);\n          $('.datatable').DataTable();\n          $('#assign_offer_partners').modal('hide');\n          $('#list_offer_partners').modal('show');\n          App.manageDynamicLoader('hide');\n          App.registerGlobalDomFunctions();\n          $('body').scrollTop(0);\n          return false;\n        }\n        var modal_dialog = $(data.selector).parents(\".modal-dialog\").eq(0);\n        if(data.selector == \"#partners_list_modal\"){\n          $('#list_offer_partners').modal('hide');\n          $('#assign_offer_partners').modal('show');\n          modal_dialog = $('#contact_assign_form_modal').parents(\".modal-dialog\").eq(0);\n        }\n        modal_dialog.html(data.data);\n        $('.datatable').DataTable();\n      }\n      else{\n        $('.page-content').html(data);\n        // $('.page-content .datatable').DataTable().fnDestroy();\n        $('.page-content .datatable').DataTable();\n        $('input#entire_search').val('');\n        $('input#entire_search').unbind('change');\n      }\n      App.manageDynamicLoader('hide');\n      App.registerGlobalDomFunctions();\n      $('body').scrollTop(0);\n      return false;\n    },\n    clearModalFormElements: function(selector){\n      $(selector).find('input,textarea,select').val('');\n      return false;\n    },\n    setSidebarActive: function(controller, flag){\n      var anc = $(\"a[data-controller='\"+controller+\"']\").first();\n      if(controller == \"user\"){\n        var anc = $(\"a[data-controller='\"+controller+\"']\").eq(1);\n      }\n      var lists = anc.parents('li');\n      $.each(lists, function(key, value){\n        link = $(this).children('a');\n        if(link.hasClass('main_link')){\n          if(!link.parent('li').hasClass('open')){\n            if(flag == \"remove\"){\n              link.removeClass('main_link');\n            }\n            link.click();\n            links.pop();\n            return false;\n          }\n        }\n      });\n    },\n    setDefaultActionActive: function(controller, mode, from){\n      if($('.dashboard_menu').hasClass('dashboard_active')){\n          $('.dashboard_menu').removeClass('open')\n                              .removeClass('active')\n                              .removeClass('dashboard_active')\n                              .find('span.arrow')\n                                  .removeClass('open');\n      }\n      $('.menu_bg').each(function(){\n        $(this).removeClass('menu_bg');\n      });\n      var task_li = $('.task_link[data-controller=\"'+controller+'\"][data-mode=\"'+mode+'\"]');\n      task_li.addClass(\"menu_bg\");\n      if(controller == \"project\"){\n        if($('.add_info_menu').parent('li').eq(0).hasClass('closed')){\n          if(from == \"normal\"){\n            $('.add_info_menu')\n            .find('span.arrow')\n              .eq(0).addClass('open')\n              .end()\n            .end()\n            .siblings('ul')\n              .eq(0).slideDown();\n          }\n        }\n      }\n      if(controller == \"client\" || controller == \"user\" || controller == \"category\" || controller == \"channel\" || controller == \"country\" || controller == \"language\" || (controller == \"offer_type\" && mode == \"index\" )){\n        if($('.add_info_menu').parent('li').eq(0).hasClass('closed')){\n          if(from == \"normal\"){\n            $('.add_info_menu')\n            .find('span.arrow')\n              .eq(0).addClass('open')\n              .end()\n            .end()\n            .siblings('ul')\n              .eq(0).slideDown();\n          }\n        }\n      }\n      var main_task = task_li.parent('li').parent('ul').siblings('.main_module_link').eq(0);\n      if(main_task.parent('li').eq(0).hasClass('closed')){\n        if(from == \"normal\"){\n          main_task\n          .find('span.arrow').eq(0).addClass('open')\n            .end()\n          .end()\n          .siblings('ul')\n          .eq(0).slideDown();\n        }\n      }\n      var sub_task = task_li.parent('li').parent('ul').siblings('.sub_task_link').eq(0);\n      if(!sub_task.parent('li').eq(0).hasClass('open')){\n        sub_task.click();\n        var main_sub_module = sub_task.parent('li').parent('ul').parent('li');\n        if(!main_sub_module.hasClass('open')){\n          main_sub_module.click();\n        }\n      }\n      return true;\n    }\n  }\n\n  /*====================================Anchor Events===================================*/\n  var links = ['default'];\n  var current_link = ['default'];\n  $('.sub-menu a.link').off().on('click',function(e){\n    App.manageDynamicLoader('show');\n    App.manageDynamicLoader('show');\n    var controller = $(this).data('controller'),\n        mode = $(this).data('mode');\n    postUrl = controller+'/'+mode;\n    current_link[0] = controller;\n    current_link[1] = mode;\n    // current_link = sub_current_link;\n    /** go back links **/\n    current_link[0] = controller;\n    current_link[1] = mode;\n    array_length = links.length-1;\n    if(links[array_length][0] !== controller || links[array_length][1] !== mode){\n      sublinks = []; //empty array\n      sublinks[0] = controller; // set controller name\n      sublinks[1] = mode; //set mode\n      links.push(sublinks); // push sublinks array to links(go back links) array\n      array_length = null; //set length to null\n    }\n    App.setDefaultActionActive(controller, mode, 'sidebar_link')\n    /** go back links end here **/\n    $.ajax({\n      url: postUrl,\n      type: \"get\",\n      success: function(data){\n        App.commonViewLoad(data);\n      }\n    });\n    e.preventDefault();\n  });\n  $('.main_module_link').off().on(\"click\", function(e){\n    App.manageDynamicLoader('show');\n    var controller = $(this).data('controller'),\n        mode = $(this).data('mode');\n    postUrl = controller+'/'+mode;\n    parent_li = $(this).parent('li');\n    /** go back links **/\n    current_link[0] = controller;\n    current_link[1] = mode;\n    array_length = links.length-1;\n    if(links[array_length][0] !== controller || links[array_length][1] !== mode){\n      sublinks = []; //empty array\n      sublinks[0] = controller; // set controller name\n      sublinks[1] = mode; //set mode\n      links.push(sublinks); // push sublinks array to links(go back links) array\n      array_length = null; //set length to null\n    }\n    /** go back links end here **/\n    if($(this).hasClass('main_link')){\n      $.ajax({\n        url: postUrl,\n        type: \"get\",\n        success: function(data){\n          App.setDefaultActionActive(controller, mode, 'main_link');\n          App.commonViewLoad(data);\n        }\n      });\n    }else{\n      $(this).addClass('main_link');\n    }\n    //User profile menu\n    if($(this).hasClass('user_profile')){\n      $('a.menu_bg').each(function(){\n        $(this).removeClass('menu_bg');\n      });\n      dashboard_menu = $('.dashboard_menu');\n      dashboard_menu.removeClass(\"active\")\n                    .removeClass(\"dashboard_active\")\n                    .find('.arrow')\n                      .removeClass('open');\n      // $('.page-sidebar li > a').parent('li').siblings('li.active').removeClass('active');\n      // $('li.open .sub-menu').slideUp();\n      // $('li.open').find('span.arrow.open').removeClass('open');\n      // $('li.open').removeClass('open');\n      // $('#user-options').click();\n    }\n    e.preventDefault();\n    if(mode == \"profile\"){\n      $('#user-options').click();\n    }\n    return false;\n  });\n  /*=================================Anchor Event ends=================================*/\n  App.registerGlobalDomFunctions();\n\n  var Controller = {\n    commonDeleteHandler: function(ctrl, id, functionName){\n      postUrl = ctrl+'/'+functionName;\n      $.ajax({\n        url: postUrl,\n        data: \"delete_id=\"+id,\n        type: \"DELETE\",\n        success: function(data){\n          App.commonViewLoad(data);\n        }\n      });\n    },\n    commonUpdateHandler: function(ctrl, selector, functionName){\n      formData = $(selector).serialize();\n      postUrl = ctrl+'/'+functionName;\n      $.ajax({\n        url: postUrl,\n        data: formData,\n        type: \"PUT\",\n        // headers: {'X-Requested-With': 'XMLHttpRequest'},\n        success: function(data){\n          App.commonViewLoad(data);\n        }\n      });\n    },\n    commonLoadHandler: function(ctrl, functionName){\n      getUrl = ctrl+'/'+functionName;\n      $.ajax({\n        url: getUrl,\n        type: \"GET\",\n        success: function(data){\n          App.commonViewLoad(data);\n        }\n      });\n    },\n    commonAnchorHandler: function(ctrl, id, functionName){\n      postUrl = ctrl+'/'+functionName;\n      $.ajax({\n        url: postUrl,\n        data: \"post_id=\"+id,\n        type: \"POST\",\n        success: function(data){\n          App.commonViewLoad(data);\n        }\n      });\n    },\n    anchorHandlerPartialType: function(ctrl, id, functionName, partial_view){\n      postUrl = ctrl+'/'+functionName;\n      sub_view = '#'+partial_view;\n      $.ajax({\n        url: postUrl,\n        data: \"post_id=\"+id,\n        type: \"POST\",\n        // headers: {'X-Requested-With': 'XMLHttpRequest'},\n        success: function(data){\n          if(typeof(data.exc) !== 'undefined'){\n            alert('Whoops! Your request can not be performed at this time. Please try again later.');\n          }\n          else{\n            $(sub_view).html(data);\n          }\n          App.manageDynamicLoader('hide');\n          App.registerGlobalDomFunctions();\n          $('body').scrollTop(0);\n          return false;\n        }\n      });\n    },\n    commonFormHandler: function(ctrl, selector, functionName){\n      formData = $(selector).serialize();\n      postUrl = ctrl+'/'+functionName;\n      $.ajax({\n        url: postUrl,\n        data: formData,\n        type: \"POST\",\n        success: function(data){\n          App.commonViewLoad(data);\n        }\n      });\n    },\n    multipartFormHandler: function(ctrl, selector, functionName){\n      formData = new FormData($(selector)[0]);\n      postUrl = ctrl+'/'+functionName;\n      $.ajax({\n        url: postUrl,\n        data: formData,\n        enctype: 'multipart/form-data',\n        processData: false,  // tell jQuery not to process the data\n        contentType: false,   // tell jQuery not to set contentType\n        type: \"POST\",\n        success: function(data){\n          App.commonViewLoad(data);\n        }\n      });\n    },\n    modalFormHandler: function(ctrl, selector, functionName){\n      formData = $(selector).serialize();\n      postUrl = ctrl+'/'+functionName;\n      $.ajax({\n        url: postUrl,\n        data: formData,\n        type: \"POST\",\n        success: function(data){\n          response = {data: data, modal: \"yes\", selector: selector};\n          App.commonViewLoad(response);\n        }\n      });\n    },\n    modalAnchorHandler: function(ctrl, id, functionName, selector){\n      postUrl = ctrl+'/'+functionName;\n      $.ajax({\n        url: postUrl,\n        data: \"post_id=\"+id,\n        type: \"POST\",\n        success: function(data){\n          response = {data: data, modal: \"yes\", selector: selector};\n          App.commonViewLoad(response);\n        }\n      });\n    }\n  };\n\n  //file upload\n  var Fileupload = {\n    fileCheck: function(obj){\n      var fileExtension = ['jpeg', 'jpg', 'png', 'bmp'];\n      if ($.inArray($(obj).val().split('.').pop().toLowerCase(), fileExtension) == -1){\n        alert(\" Invalid File Type!\\nOnly '.jpeg','.jpg', '.png' formats are allowed.\");\n        obj.val('');\n      }\n      else {\n        return false;\n      }\n    }\n  };\n\n  /**\n   * Object to fetch live data.\n   * @type {Object}\n   */\n  var LiveFetch = {\n    fetchPlacement: function(){\n      project_id = $('#offer_project_select').val();\n      if(project_id != ''){\n        $.ajax({\n          url: 'placement/by-project/'+project_id,\n          type: \"GET\",\n          success: function(data){\n            if(typeof(data.exc) !== 'undefined'){\n              alert('Whoops! Your request can not be performed at this time. Please try again later.');\n            }\n            else{\n              if(!$(\"#offer_placement_select\").length){\n                var select = '<select name=\"placement_ids[]\" id=\"offer_placement_select\" class=\"select2 form-control\" multiple=\"multiple\"></select>';\n                $('#offer_placement_select_wrapper').html(select);\n                $('#offer_placement_select').html('');\n              }else{\n                $('#offer_placement_select').html('');\n              }\n              $.each(data.placements, function(key, value){\n                var select_option = '<option value=\"'+value.id+'\">'+value.title+'</option>';\n                $('#offer_placement_select').append(select_option);\n              });\n            }\n            App.manageDynamicLoader('hide');\n            App.registerGlobalDomFunctions();\n            return false;\n          }\n        });\n      }else{\n        no_data = '<p class=\"label\">No matching records found.</p>'\n        $('#offer_placement_select_wrapper').html(no_data);\n        return false;\n      }\n    },\n    fetchOfferPartner: function(){\n      project_id = $('#offer_project_select').val();\n      if(project_id != ''){\n        $.ajax({\n          url: 'partner/by-project/'+project_id,\n          type: \"GET\",\n          success: function(data){\n            if(typeof(data.exc) !== 'undefined'){\n              alert('Whoops! Your request can not be performed at this time. Please try again later.');\n            }\n            else{\n              if(!$(\"#offer_partner_select\").length){\n                var select = '<select name=\"partner_id\" id=\"offer_partner_select\" class=\"select2 form-control\">'\n                    select +='<option value=\"\">Select Below</option></select>';\n                $('#offer_partner_select_wrapper').html(select);\n              }else{\n                $('#offer_partner_select').html('<option value=\"\">Select Below</option></select>');\n              }\n              $.each(data.partners, function(key, value){\n                var select_option = '<option value=\"'+value.id+'\">'+value.partner_name+'</option>';\n                $('#offer_partner_select').append(select_option);\n              });\n            }\n            App.manageDynamicLoader('hide');\n            App.registerGlobalDomFunctions();\n            return false;\n          }\n        });\n      }else{\n        no_data = '<p class=\"label\">No matching records found.</p>'\n        $('#offer_partner_select_wrapper').html(no_data);\n        return false;\n      }\n    },\n    fetchPrimaryContact: function(){\n      partner_id = $('#offer_partner_select').val();\n      if(partner_id != '' || partner_id != undefined){\n        $.ajax({\n          url: 'contact/by-partner/'+partner_id,\n          type: \"GET\",\n          success: function(data){\n            if(typeof(data.exc) !== 'undefined'){\n              alert('Whoops! Your request can not be performed at this time. Please try again later.');\n            }\n            else{\n              if(!$(\"#offer_partner_contact_select\").length){\n                var select_none = '<select name=\"contact_id\" id=\"offer_partner_contact_select\" class=\"select2 form-control\"><option value=\"\">Select Below</option></select>';\n                $('#offer_partner_contact_select_wrapper').html(select_none);\n              }else{\n                $('#offer_partner_contact_select').html('<option value=\"\">Select Below</option></select>');\n              }\n              $.each(data.contacts, function(key, value){\n                var select_option = '<option value=\"'+value.id+'\">'+value.first_name+' '+value.last_name+'</option>';\n                $('#offer_partner_contact_select').append(select_option);\n              });\n            }\n            App.manageDynamicLoader('hide');\n            App.registerGlobalDomFunctions();\n            return false;\n          }\n        });\n      }else{\n        no_data = '<p class=\"label\">No matching records found.</p>'\n        $('#offer_partner_contact_select_wrapper').html(no_data);\n        return false;\n      }\n    }\n  };\n});"],"sourceRoot":"/source/"}